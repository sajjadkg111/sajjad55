#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… Ù‚ÛŒÙ…Øªâ€ŒÛŒØ§Ø¨
Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡: Assistant
ØªØ§Ø±ÛŒØ®: 2024
"""

import asyncio
import signal
import sys
from telegram_bot import TelegramBot

def signal_handler(signum, frame):
    """Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§ÛŒ ØªÙˆÙ‚Ù"""
    print("\nğŸ›‘ Ø¯Ø±ÛŒØ§ÙØª Ø³ÛŒÚ¯Ù†Ø§Ù„ ØªÙˆÙ‚Ù...")
    sys.exit(0)

async def main():
    """ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ"""
    print("ğŸ¤– Ø´Ø±ÙˆØ¹ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù… Ù‚ÛŒÙ…Øªâ€ŒÛŒØ§Ø¨...")
    print("=" * 50)
    
    # ØªÙ†Ø¸ÛŒÙ… Ø³ÛŒÚ¯Ù†Ø§Ù„â€ŒÙ‡Ø§
    signal.signal(signal.SIGINT, signal_handler)
    signal.signal(signal.SIGTERM, signal_handler)
    
    try:
        # Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ø´Ø±ÙˆØ¹ Ø±Ø¨Ø§Øª
        bot = TelegramBot()
        
        print("ğŸ“¡ Ø§ØªØµØ§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…...")
        print("â° ØªÙ†Ø¸ÛŒÙ… Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ...")
        print("ğŸš€ Ø´Ø±ÙˆØ¹ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§...")
        
        # Ø´Ø±ÙˆØ¹ Ø±Ø¨Ø§Øª
        await bot.start()
        
    except KeyboardInterrupt:
        print("\nğŸ›‘ ØªÙˆÙ‚Ù Ø±Ø¨Ø§Øª ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±...")
    except Exception as e:
        print(f"âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§Ø¬Ø±Ø§ÛŒ Ø±Ø¨Ø§Øª: {e}")
        sys.exit(1)
    finally:
        print("ğŸ‘‹ Ø±Ø¨Ø§Øª Ù…ØªÙˆÙ‚Ù Ø´Ø¯")

if __name__ == "__main__":
    # Ø§Ø¬Ø±Ø§ÛŒ Ø±Ø¨Ø§Øª
    asyncio.run(main())
