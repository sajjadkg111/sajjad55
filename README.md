# 🤖 ربات تلگرام قیمت‌یاب

ربات تلگرامی هوشمند برای دریافت و ارسال قیمت‌های لحظه‌ای طلا، ارز، ارزهای دیجیتال و شاخص‌های بورس ایران.

## ✨ ویژگی‌ها

- 📊 دریافت قیمت لحظه‌ای دلار و طلا (هر 1 دقیقه)
- 🌍 دریافت قیمت ارزهای جهانی (هر 10 دقیقه)
- 🪙 دریافت قیمت ارزهای دیجیتال (هر 15 دقیقه)
- 📈 دریافت شاخص‌های بورس ایران (هر 15 دقیقه)
- 📱 ارسال پیام‌های زیبا با استیکرهای مناسب
- 📊 تحلیل روند قیمتی (صعودی 🔺، نزولی 🔻، پایدار ➖)
- 💾 ذخیره تاریخچه قیمت‌ها برای مقایسه
- ⚡ مدیریت خطاها و پایداری بالا

## 🚀 نصب و راه‌اندازی

### پیش‌نیازها
- Python 3.8+
- pip

### نصب کتابخانه‌ها
```bash
pip install -r requirements.txt
```

### تنظیمات
1. فایل `config.py` را ویرایش کنید:
   - `BOT_TOKEN`: توکن ربات تلگرام
   - `CHANNEL_ID`: آیدی کانال
   - `API_KEY`: کلید API

### اجرا
```bash
python main.py
```

### تست API
برای بررسی عملکرد API:
```bash
python -c "from api_client import APIClient; client = APIClient(); print(client.get_gold_currency_data())"
```

## 📁 ساختار پروژه

```
├── main.py                 # فایل اصلی اجرا
├── config.py              # تنظیمات ربات
├── telegram_bot.py        # کلاس اصلی ربات
├── api_client.py          # ارتباط با API ها
├── data_manager.py        # مدیریت داده‌ها
├── message_formatter.py   # فرمت‌بندی پیام‌ها
├── requirements.txt       # کتابخانه‌های مورد نیاز
└── README.md             # راهنمای پروژه
```

## ⏰ زمان‌بندی

| وظیفه | فاصله زمانی | محتوا |
|-------|-------------|--------|
| طلا و دلار | هر 1 دقیقه | قیمت دلار، سکه، گرم 18 عیار |
| ارزهای مختلف | هر 5 دقیقه | قیمت ارزهای جهانی + نمادهای بورس |
| ارزهای دیجیتال و بورس | هر 10 دقیقه | ارزهای دیجیتال + شاخص‌های بورس |

## 🔧 تنظیمات API

### API های مورد استفاده:
- **طلا و ارز**: https://brsapi.ir/free-api-gold-currency-webservice/
- **شاخص‌های بورس**: https://brsapi.ir/bourse-api-index-webservice/
- **نمادهای بورس**: https://brsapi.ir/

### 💰 واحدهای قیمت:
- تمام قیمت‌های ارز و طلا به تومان نمایش داده می‌شوند
- ارزهای دیجیتال به دلار نمایش داده می‌شوند (به جز تتر که به تومان است)
- شاخص‌های بورس بدون واحد خاص نمایش داده می‌شوند

## 📊 نمونه خروجی

### پیام طلا و دلار:
```
🏆 قیمت لحظه‌ای طلا و دلار
⏰ 2024/01/15 14:30:00
==============================

💵 دلار: 580,000 تومان 🔺
🪙 سکه: 45,000,000 تومان 🔻
🥇 گرم ۱۸ عیار: 3,200,000 تومان ➖

📊 تحلیل روند: صعودی 📈
```

## 🛠️ مدیریت خطاها

ربات دارای سیستم مدیریت خطای پیشرفته است:
- ✅ بررسی اتصال اینترنت
- ✅ مدیریت خطاهای API
- ✅ لاگ کردن خطاها
- ✅ ارسال پیام خطا به کانال

## 📝 لاگ‌ها

ربات تمام فعالیت‌ها را در فایل لاگ ثبت می‌کند:
- زمان شروع و توقف
- خطاهای API
- پیام‌های ارسال شده
- تغییرات قیمت

## 🔄 به‌روزرسانی

برای به‌روزرسانی ربات:
1. کد جدید را دانلود کنید
2. تنظیمات را بررسی کنید
3. ربات را مجدداً اجرا کنید

## 📞 پشتیبانی

در صورت بروز مشکل:
1. لاگ‌ها را بررسی کنید
2. اتصال اینترنت را چک کنید
3. تنظیمات API را بررسی کنید

## 📄 مجوز

این پروژه تحت مجوز MIT منتشر شده است.

---

**نکته**: این ربات برای استفاده شخصی و آموزشی طراحی شده است. لطفاً از قوانین و محدودیت‌های API های مورد استفاده پیروی کنید. 